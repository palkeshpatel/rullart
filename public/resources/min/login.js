var base_url=$("#base_url").val();$(document).ready(function(){$("#form-login").validate({highlight:function(e){$(e).parent().addClass("has-error")},unhighlight:function(e){$(e).parent().removeClass("has-error")}}),$("#ra-register").on("click",function(e){e.preventDefault();var t=$("#overlayBody"),r=$("#overlayLoader"),a=$(this).attr("href")+"?t="+Date.now();return t.html(""),r.show(),$.get(a,function(e){t.html(e)}).done(function(){r.hide(),t.show()}),!1}),$("#ra-forgot").on("click",function(e){e.preventDefault();var t=$("#overlayBody"),r=$("#overlayLoader"),a=$(this).attr("href")+"?t="+Date.now();return t.html(""),r.show(),$.get(a,function(e){t.html(e)}).done(function(){r.hide(),t.show()}),!1}),$("#btnLogin").on("click",function(e){if(e.preventDefault(),$("#form-login").valid()){var a=$(this),i=$(this).text();$(this).text(pleasewait),$(this).attr("disabled",!0);var t=base_url+"login/validate",r=new FormData($("#form-login")[0]);$.ajax({url:t,type:"POST",data:r,contentType:!1,processData:!1,dataType:"JSON",success:function(e){if(e.status){if($(".print-error-msg").css("display","none"),"shoppingcart"==e.redirect)location.href=base_url+"checkout";else{$("#liWelcome").removeClass("hidden");var t=$("#liWelcome").html();t=t.replace("{{firstname}}",e.firstname),$("#liWelcome").html(t)}$("#closeOverlay").click(),$("#ra-post-login").closest("li").show(),$("#ra-login").closest("li").hide()}else $(".print-error-msg").css("display","block"),$(".print-error-msg").html(e.msg);$(a).text(i),$(a).attr("disabled",!1)},error:function(e,t,r){alert(t),$(a).text(i),$(a).attr("disabled",!1)}})}}),$("#btnLoginGuest").on("click",function(e){if(e.preventDefault(),$("#form-login-guest").valid()){var a=$(this),i=$(this).text();$(this).text(pleasewait),$(this).attr("disabled",!0);var t=base_url+"login/validate_guest",r=new FormData($("#form-login-guest")[0]);$.ajax({url:t,type:"POST",data:r,contentType:!1,processData:!1,dataType:"JSON",success:function(e){if(e.status){if($(".print-error-msg").css("display","none"),"shoppingcart"==e.redirect)location.href=base_url+"checkout";else{$("#liWelcome").removeClass("hidden");var t=$("#liWelcome").html();t=t.replace("{{firstname}}",e.firstname),$("#liWelcome").html(t)}$("#closeOverlay").click(),$("#ra-post-login").closest("li").show(),$("#ra-login").closest("li").hide()}else $(".print-error-msg").css("display","block"),$(".print-error-msg").html(e.msg);$(a).text(i),$(a).attr("disabled",!1)},error:function(e,t,r){alert(t),$(a).text(i),$(a).attr("disabled",!1)}})}})});