function productlist(e,a){var l=getParameterByName("page");null!=l&&1!=a||(l=1);location.pathname.split("/");var o=base_url+"product/",n=$("#hdncurrencycode").val(),c=$("#hdncurrencyrate").val(),i="Results Found",u="No products found !!!",p="Please check other filters.",d="SOLD OUT";-1<$("#base_url").val().indexOf("/ar")&&(n="دك",i="نتائج البحث",p="الرجاء اختيار فلتر آخر",u="لم نجد أي منتجات!!!",d="نفدت الكمية"),$.ajax({type:"GET",data:"firstload="+a,url:e,success:function(e){if(1==l){var a=$(".breadcrumb");$("html, body").animate({scrollTop:a.offset().top},600)}if(e)if("FALSE"==e)$(".catalog-items").html('<div class="no-results"><h3>'+u+'</h3><p class="small">'+p+"</p></div>");else{var t=$.parseJSON(e),r="",s="";$.each(t.products,function(e,a){""==(s=a.photo1)&&(s="noimage.jpg"),r+='<div class="col-xs-6 col-sm-4"><div class="product-item"><a href="'+o+a.categorycode+"/"+a.productcode+'"><span class="product-image"><img src="'+resourceurl+"storage/thumb-"+s+'" alt="'+a.title+'"></span>',r+='<span class="product-content"><span class="product-title">'+a.title+'</span><span class="product-price">',0<a.discount&&(r+='<span class="standard-price">'+n+" "+parseFloat(a.price*c).toFixed(2)+"</span>"),r+='<span class="actual-price">'+n+" "+parseFloat(a.sellingprice*c).toFixed(2)+"</span>",r+="</span>",r+="</span>",0<a.discount&&(r+='<span class="product-discount">-',r+=removeTrailingZeros(a.discount),r+="%</span>"),0==a.qty&&(r+='<p class="sold-out">'+d+"</p>"),r+="</a></div></div>"}),1==l?$(".catalog-items").html(r):$(".catalog-items").append(r),$(".results-num").html(t.productcnt+" "+i),t.totalpage>l?$(".catalog-footer").removeClass("hidden"):$(".catalog-footer").addClass("hidden")}else $(".catalog-items").html("nodata")}})}function removeTrailingZeros(e){if(-1===(e=e.toString()).indexOf("."))return e;for(;("0"===e.slice(-1)||"."===e.slice(-1))&&-1!==e.indexOf(".");)e=e.substr(0,e.length-1);return e}function queryStringUrlReplacement(e,a,t){var r,s,l=new RegExp("[\\?&]"+a+"=([^&#]*)"),o=l.exec(e);null===o?s=e+(r=/\?/.test(e)?"&":"?")+a+"="+t:(r=o[0].charAt(0),s=e.replace(l,r+a+"="+t));return s}function removeURLParameter(e,a){var t=e.split("?");if(2<=t.length){for(var r=encodeURIComponent(a)+"=",s=t[1].split(/[&;]/g),l=s.length;0<l--;)-1!==s[l].lastIndexOf(r,0)&&s.splice(l,1);return e=t[0]+"?"+s.join("&")}return e}function GetFilters(){var t={},r=[],e=window.location.href.split("?")[0];$('input[type="checkbox"]').each(function(e){this.checked&&(t.hasOwnProperty(this.name)||(t[this.name]=[]),t[this.name].push(this.value))}),null!=$(".price:checked").val()&&(t.price=[],t.price.push($(".price:checked").val()));var a=Object.keys(t);r="";a.forEach(function(e,a){0<a&&(r+="&"),r+=e+"="+t[e].join(",")});var s=getParameterByName("keyword");null!=s&&(""!=r?r+="&keyword="+s:r="keyword="+s);var l=getParameterByName("category");null!=l&&(""!=r?r+="&category="+l:r="category="+l);var o=getParameterByName("main");null!=o&&(""!=r?r+="&main="+o:r="main="+o);var n=$("#sortby").val();"relevance"==n&&(n=""),""!=n&&(""!=r?r+="&sortby="+n:r="sortby="+n);var c="",i=e.split("/");productlist(c="search"==i[4]?base_url+"prodlisting/search?"+r:"whatsnew"==i[4]?base_url+"prodlisting/whatsnew?"+r:"sale"==i[4]?base_url+"prodlisting/sale?"+r:"occassion"==i[4]?base_url+"prodlisting/occassion/"+i[5]+"?"+r:base_url+"prodlisting/category/"+i[5]+"?"+r,1),history.pushState&&(c=""!=r?e+"?"+r:e,history.pushState(null,null,c))}$(document).ready(function(){$("#showall").on("click",function(e){var a=getParameterByName("page");null==a&&(a=1),a=parseInt(a)+1,e.preventDefault(),url=queryStringUrlReplacement(window.location.href,"page",a),history.pushState(null,null,url);var t=location.pathname.split("/");"search"==t[2]?url=base_url+"prodlisting/search"+location.search:"occassion"==t[2]?url=base_url+"prodlisting/occassion/"+t[3]+location.search:"whatsnew"==t[2]?url=base_url+"prodlisting/whatsnew"+location.search:"sale"==t[2]?url=base_url+"prodlisting/sale"+location.search:url=base_url+"prodlisting/category/"+t[3]+location.search,productlist(url,0)})});